# Copyright Broadcom, Inc. All Rights Reserved.
# SPDX-License-Identifier: APACHE-2.0

########################
# Test coverage for the php-fpm package
# Needed vars:
# - None
########################
file:
  /opt/bitmoa/php/etc/php.ini:
    exists: true
    contents:
      - /^opcache.interned_strings_buffer = 16/
      - /^opcache.memory_consumption = 192/
      - /^opcache.file_cache = \/opt\/bitmoa\/php\/var\/run\/opcache_file/
      - /^upload_tmp_dir = \/opt\/bitmoa\/php\/tmp/
      - /^session.save_path = \/opt\/bitmoa\/php\/var\/run\/session/
      - /^error_log = \/dev\/stderr/
  /opt/bitmoa/php/etc/php-fpm.d/www.conf:
    exists: true
    contents:
      - /^listen = \/opt\/bitmoa\/php\/var\/run\/www.sock/
  /opt/bitmoa/php/logs/php-fpm.log:
    exists: true
    filetype: symlink
    linked-to: /dev/stdout
  /opt/bitmoa/php/etc/common.conf.disabled:
    exists: true
    filetype: file
  /opt/bitmoa/php/etc:
    exists: true
    filetype: directory
    mode: "0775"
  /opt/bitmoa/php/tmp:
    exists: true
    filetype: directory
    mode: "0775"
  /opt/bitmoa/php/var/run:
    exists: true
    filetype: directory
    mode: "0775"
  /opt/bitmoa/php/logs:
    exists: true
    filetype: directory
    mode: "0775"
  /opt/bitmoa/php/var/run/session:
    exists: true
    filetype: directory
    mode: "0775"

